#!/bin/sh
echo "üìù Validating commit message..."

# Read the commit message from the file
commit_msg=$(cat "$1")

# Check if commit message follows conventional commit format
if echo "$commit_msg" | grep -qE '^(feat|fix|chore|refactor|hotfix|dev)(\(.+\))?: .+'; then
  echo "‚úÖ Commit message follows conventional commit format"
else
  echo "‚ùå Commit message does not follow conventional commit format"
  echo ""
  echo "Expected format: type(scope): description"
  echo "Types: feat, fix, chore, refactor, hotfix, dev"
  echo ""
  echo "Examples:"
  echo "  feat(search): add advanced filtering"
  echo "  fix(ui): resolve layout issue"
  echo "  chore(deps): update dependencies"
  echo ""
  echo "Your message: $commit_msg"
  exit 1
fi

# Check for common issues in commit messages
if echo "$commit_msg" | grep -qiE '(wip|work in progress|temp|temporary)'; then
  echo "‚ö†Ô∏è  Warning: Commit message contains WIP/temporary language"
  echo "   Consider using a more descriptive message"
fi

echo "üéâ Commit message validation passed!"

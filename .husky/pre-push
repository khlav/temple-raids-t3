#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."
echo "  â€¢ Linting codebase"
echo "  â€¢ Type checking"
echo "  â€¢ Building application"

# Run lint with minimal output
if ! pnpm lint > /dev/null 2>&1; then
  echo "âŒ Linting failed"
  echo "Running lint to show errors:"
  pnpm lint
  exit 1
fi

# Run typecheck with minimal output
if ! pnpm typecheck > /dev/null 2>&1; then
  echo "âŒ Type checking failed"
  echo "Running typecheck to show errors:"
  pnpm typecheck
  exit 1
fi

# Run build with minimal output (but show build summary)
echo "  â€¢ Building application..."
if pnpm build > /dev/null 2>&1; then
  echo "âœ… All pre-push checks passed"
else
  echo "âŒ Build failed"
  echo "Running build to show errors:"
  pnpm build
  exit 1
fi
